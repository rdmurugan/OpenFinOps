# OpenFinOps IAM Configuration
# ===========================
# Configure roles, permissions, and personas for your organization

# Default Security Settings
security_settings:
  session_timeout: 3600  # seconds (1 hour default)
  require_mfa_for_executives: true
  password_policy:
    min_length: 12
    require_uppercase: true
    require_lowercase: true
    require_numbers: true
    require_special_chars: true
  max_failed_login_attempts: 5
  account_lockout_duration: 1800  # 30 minutes

# Data Classification Levels
data_classifications:
  PUBLIC: 0
  INTERNAL: 1
  CONFIDENTIAL: 2
  RESTRICTED: 3

# Dashboard Types
dashboard_types:
  - CFO_EXECUTIVE
  - COO_OPERATIONAL
  - CTO_TECHNICAL
  - CEO_STRATEGIC
  - INFRASTRUCTURE_LEADER
  - FINANCE_ANALYST
  - DATA_SCIENTIST
  - SECURITY_LEADER
  - OPERATIONS_MANAGER

# Role Definitions
roles:
  # C-Level Executives
  cfo:
    display_name: "Chief Financial Officer"
    description: "Executive financial oversight and strategic financial decision making"
    data_access_level: RESTRICTED
    require_mfa: true
    session_timeout: 14400  # 4 hours
    allowed_dashboards:
      - CFO_EXECUTIVE
      - CEO_STRATEGIC
    permissions:
      - name: view_financial_dashboards
        resource_type: dashboard
        access_level: EXECUTIVE
      - name: view_all_costs
        resource_type: financial_data
        access_level: READ
      - name: view_budgets
        resource_type: budget_data
        access_level: READ
      - name: approve_budgets
        resource_type: budget_data
        access_level: WRITE
      - name: view_financial_forecasts
        resource_type: forecast_data
        access_level: READ
      - name: export_financial_reports
        resource_type: reports
        access_level: READ
      - name: view_audit_trails
        resource_type: audit_data
        access_level: READ
      - name: view_compliance_reports
        resource_type: compliance_data
        access_level: READ

  cto:
    display_name: "Chief Technology Officer"
    description: "Technology strategy and technical leadership"
    data_access_level: RESTRICTED
    require_mfa: true
    session_timeout: 14400
    allowed_dashboards:
      - CTO_TECHNICAL
      - CEO_STRATEGIC
    permissions:
      - name: view_technical_dashboards
        resource_type: dashboard
        access_level: EXECUTIVE
      - name: view_infrastructure_metrics
        resource_type: system_data
        access_level: READ
      - name: manage_technical_resources
        resource_type: infrastructure
        access_level: WRITE
      - name: view_security_posture
        resource_type: security_data
        access_level: READ
      - name: approve_architecture_changes
        resource_type: architecture
        access_level: WRITE
      - name: view_ai_model_performance
        resource_type: ai_metrics
        access_level: READ
      - name: manage_cloud_resources
        resource_type: cloud_infrastructure
        access_level: WRITE

  coo:
    display_name: "Chief Operating Officer"
    description: "Operational excellence and business process optimization"
    data_access_level: RESTRICTED
    require_mfa: true
    session_timeout: 14400
    allowed_dashboards:
      - COO_OPERATIONAL
      - CEO_STRATEGIC
    permissions:
      - name: view_operational_dashboards
        resource_type: dashboard
        access_level: EXECUTIVE
      - name: view_operational_metrics
        resource_type: operational_data
        access_level: READ
      - name: view_efficiency_metrics
        resource_type: efficiency_data
        access_level: READ
      - name: approve_operational_changes
        resource_type: operations
        access_level: WRITE
      - name: view_team_performance
        resource_type: team_data
        access_level: READ

  ceo:
    display_name: "Chief Executive Officer"
    description: "Overall strategic leadership and decision making"
    data_access_level: RESTRICTED
    require_mfa: true
    session_timeout: 14400
    allowed_dashboards: all  # Access to all dashboards
    permissions:
      - name: view_all_dashboards
        resource_type: dashboard
        access_level: ADMIN
      - name: view_all_data
        resource_type: all
        access_level: READ
      - name: approve_strategic_initiatives
        resource_type: strategy
        access_level: WRITE

  # Management Roles
  infrastructure_leader:
    display_name: "Infrastructure Leader"
    description: "Technical infrastructure management and optimization"
    data_access_level: CONFIDENTIAL
    require_mfa: false
    session_timeout: 28800  # 8 hours
    allowed_dashboards:
      - INFRASTRUCTURE_LEADER
    permissions:
      - name: view_infrastructure_dashboards
        resource_type: dashboard
        access_level: READ
      - name: view_system_metrics
        resource_type: system_data
        access_level: READ
      - name: manage_infrastructure_alerts
        resource_type: alerts
        access_level: WRITE
      - name: view_resource_utilization
        resource_type: resource_data
        access_level: READ
      - name: optimize_resources
        resource_type: optimization
        access_level: WRITE

  finance_analyst:
    display_name: "Finance Analyst"
    description: "Detailed financial analysis and reporting"
    data_access_level: CONFIDENTIAL
    require_mfa: false
    session_timeout: 28800
    allowed_dashboards:
      - FINANCE_ANALYST
    permissions:
      - name: view_financial_dashboards
        resource_type: dashboard
        access_level: READ
      - name: view_cost_analytics
        resource_type: financial_data
        access_level: READ
      - name: create_financial_reports
        resource_type: reports
        access_level: WRITE
      - name: analyze_cost_trends
        resource_type: analytics
        access_level: READ

  data_scientist:
    display_name: "Data Scientist"
    description: "AI/ML model development and analysis"
    data_access_level: CONFIDENTIAL
    require_mfa: false
    session_timeout: 28800
    allowed_dashboards:
      - DATA_SCIENTIST
    permissions:
      - name: view_ai_dashboards
        resource_type: dashboard
        access_level: READ
      - name: view_model_metrics
        resource_type: ai_metrics
        access_level: READ
      - name: train_models
        resource_type: ai_training
        access_level: WRITE
      - name: deploy_models
        resource_type: ai_deployment
        access_level: WRITE

  security_leader:
    display_name: "Security Leader"
    description: "Security and compliance oversight"
    data_access_level: RESTRICTED
    require_mfa: true
    session_timeout: 14400
    allowed_dashboards:
      - SECURITY_LEADER
    permissions:
      - name: view_security_dashboards
        resource_type: dashboard
        access_level: READ
      - name: view_security_events
        resource_type: security_data
        access_level: READ
      - name: manage_security_policies
        resource_type: security_policy
        access_level: WRITE
      - name: view_compliance_status
        resource_type: compliance_data
        access_level: READ

  operations_manager:
    display_name: "Operations Manager"
    description: "Day-to-day operational management"
    data_access_level: INTERNAL
    require_mfa: false
    session_timeout: 28800
    allowed_dashboards:
      - OPERATIONS_MANAGER
    permissions:
      - name: view_operations_dashboards
        resource_type: dashboard
        access_level: READ
      - name: view_operational_metrics
        resource_type: operational_data
        access_level: READ
      - name: manage_incidents
        resource_type: incidents
        access_level: WRITE

# Pre-configured User Personas
# These can be used as templates when creating new users
personas:
  cfo_persona:
    roles:
      - cfo
    department: Finance
    default_dashboard: CFO_EXECUTIVE
    notification_preferences:
      email: true
      slack: true
      sms: false
    custom_settings:
      cost_alert_threshold: 10000  # Alert if cost exceeds $10k
      budget_variance_threshold: 5  # Alert if variance > 5%

  cto_persona:
    roles:
      - cto
    department: Engineering
    default_dashboard: CTO_TECHNICAL
    notification_preferences:
      email: true
      slack: true
      pagerduty: true
    custom_settings:
      infrastructure_alert_priority: high
      performance_monitoring: enabled

  coo_persona:
    roles:
      - coo
    department: Operations
    default_dashboard: COO_OPERATIONAL
    notification_preferences:
      email: true
      slack: true

  ceo_persona:
    roles:
      - ceo
    department: Executive
    default_dashboard: CEO_STRATEGIC
    notification_preferences:
      email: true
      executive_summary: daily

  infrastructure_lead_persona:
    roles:
      - infrastructure_leader
    department: Engineering
    default_dashboard: INFRASTRUCTURE_LEADER
    notification_preferences:
      email: true
      slack: true
      pagerduty: true

  finance_analyst_persona:
    roles:
      - finance_analyst
    department: Finance
    default_dashboard: FINANCE_ANALYST
    notification_preferences:
      email: true

  data_scientist_persona:
    roles:
      - data_scientist
    department: AI/ML
    default_dashboard: DATA_SCIENTIST
    notification_preferences:
      email: true
      slack: true

# Custom Role Templates
# Use these to quickly create new roles with common permission sets
role_templates:
  readonly_executive:
    data_access_level: RESTRICTED
    require_mfa: true
    session_timeout: 14400
    base_permissions:
      - view_dashboards
      - view_reports
      - export_data

  technical_manager:
    data_access_level: CONFIDENTIAL
    require_mfa: false
    session_timeout: 28800
    base_permissions:
      - view_system_metrics
      - manage_alerts
      - view_performance_data

  analyst:
    data_access_level: CONFIDENTIAL
    require_mfa: false
    session_timeout: 28800
    base_permissions:
      - view_analytics
      - create_reports
      - export_data
